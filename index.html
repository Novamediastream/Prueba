<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SPORT GOL CR - En Vivo</title>
    <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css" />
    <style>
        :root { --accent: #ff9800; --bg-card: #1a1a1a; }
        body { margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; background-color: #0a0a0a; color: white; display: flex; flex-direction: column; align-items: center; }
        
        /* HEADER */
        header { width: 100%; padding: 20px; display: flex; justify-content: center; align-items: center; gap: 20px; background: #151515; }
        header img { height: 60px; border-radius: 50%; }
        .titulo-colores { font-size: 2rem; font-weight: bold; background: linear-gradient(to right, #ff0000, #ffff00, #00ff00, #0000ff); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-transform: uppercase; }

        .container { width: 95%; max-width: 1100px; margin: 20px auto; text-align: center; }

        /* REPRODUCTOR IBLUPS */
        .main-stream { width: 100%; border-radius: 12px; overflow: hidden; border: 2px solid #333; background: #000; margin-bottom: 30px; }

        /* AGENDA ESTILO SOLICITADO */
        .agenda-container { display: flex; gap: 15px; background: var(--bg-card); padding: 15px; border-radius: 16px; border: 1px solid #333; text-align: left; }
        .agenda-video { flex: 2; background: #000; border-radius: 12px; overflow: hidden; }
        .agenda-list { flex: 1; display: flex; flex-direction: column; gap: 10px; max-height: 450px; overflow-y: auto; }
        
        .vid-item { background: #252525; display: flex; align-items: center; gap: 10px; padding: 10px; border-radius: 10px; cursor: pointer; border: 2px solid transparent; }
        .vid-item.active { border-color: var(--accent); background: #333; }
        .vid-item img { width: 60px; height: 40px; border-radius: 4px; object-fit: cover; }
        .vid-item h4 { font-size: 13px; margin: 0; text-transform: uppercase; color: #fff; }

        footer { margin-top: 50px; padding: 30px; width: 100%; background-color: #000; border-top: 2px solid #ff0000; text-align: center; font-size: 0.85rem; }
        
        @media (max-width: 800px) { .agenda-container { flex-direction: column; } }
    </style>
</head>
<body>

    <header>
        <img src="https://i.imgur.com/NzRb9dK.jpeg" alt="Logo">
        <div class="titulo-colores">SPORT GOL CR</div>
    </header>

    <div class="container">
        <div class="main-stream">
            <div style="position:relative; padding-bottom:56.25%; height:0; overflow:hidden;">
                <iframe src="https://iblups.com/embed/lstvcr" style="position:absolute; top:0; left:0; width:100%; height:100%;" frameborder="0" allowfullscreen></iframe>
            </div>
        </div>

        <div class="agenda-container">
            <div class="agenda-video">
                <video id="agenda-player" playsinline controls></video>
                <div id="event-title" style="padding: 10px; background: #222; font-weight: bold; text-align: center; font-size: 14px; color: var(--accent);">SELECCIONA UN PARTIDO</div>
            </div>

            <div class="agenda-list" id="playlist">
                <div class="vid-item active" data-url="http://tv.zapping.life:8080/live/luisleon023/ecababdf742f/157562.m3u8">
                    <img src="https://i.imgur.com/NzRb9dK.jpeg">
                    <div><h4>RIVER PLATE VS TIGRE</h4><p style="font-size:10px;margin:0;color:#aaa;">5:00 PM</p></div>
                </div>
                <div class="vid-item" data-url="http://tv.zapping.life:8080/live/luisleon023/ecababdf742f/9516.m3u8">
                    <img src="https://i.imgur.com/NzRb9dK.jpeg">
                    <div><h4>RIVER PLATE VS TIGRE (OPC 2)</h4><p style="font-size:10px;margin:0;color:#aaa;">OPCIÓN 2</p></div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <p>PAGINA WEB CREADA POR <strong>NOVA MEDIA STREAM</strong></p>
        <p>CONTACTO: novamediastreamcostarica@gmail.com</p>
        <p>©2026 TODOS LOS DERECHOS RESERVADOS</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script src="https://cdn.plyr.io/3.7.8/plyr.polyfilled.js"></script>
    <script>
        const video = document.getElementById('agenda-player');
        const plyr = new Plyr(video);
        let hls;

        function loadEvent(url, title) {
            document.getElementById('event-title').innerText = title;
            // EL TRUCO: Usamos un proxy para que GitHub acepte el link http
            const finalUrl = "https://images1-focus-opensocial.googleusercontent.com/gadgets/proxy?container=focus&refresh=600&url=" + encodeURIComponent(url);

            if (Hls.isSupported()) {
                if (hls) hls.destroy();
                hls = new Hls();
                hls.loadSource(url); // Intentamos directo primero
                hls.attachMedia(video);
                hls.on(Hls.Events.ERROR, function (event, data) {
                    if (data.fatal) {
                        // Si falla por seguridad, usamos el proxy de Google o CORS
                        hls.loadSource("https://corsproxy.io/?" + encodeURIComponent(url));
                    }
                });
            } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                video.src = url;
            }
        }

        document.getElementById('playlist').addEventListener('click', (e) => {
            const item = e.target.closest('.vid-item');
            if (!item) return;
            document.querySelectorAll('.vid-item').forEach(i => i.classList.remove('active'));
            item.classList.add('active');
            loadEvent(item.dataset.url, item.querySelector('h4').innerText);
        });

        window.onload = () => {
            const first = document.querySelector('.vid-item');
            if(first) loadEvent(first.dataset.url, first.querySelector('h4').innerText);
        };
    </script>
</body>
</html>
